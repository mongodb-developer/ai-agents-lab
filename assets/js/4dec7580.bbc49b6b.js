"use strict";(self.webpackChunkai_agents_lab=self.webpackChunkai_agents_lab||[]).push([[679],{1303:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>l});var s=t(4848),o=t(8453);t(1179);const r={},a="\ud83d\udc50 Create agent tools",i={id:"agent-tools/create-agent-tools",title:"\ud83d\udc50 Create agent tools",description:"The easiest way to define custom tools for agents in LangChain is using the @tool decorator. The decorator makes tools out of functions by using the function name as the tool name by default, and the function's docstring as the tool's description.",source:"@site/docs/50-agent-tools/4-create-agent-tools.mdx",sourceDirName:"50-agent-tools",slug:"/agent-tools/create-agent-tools",permalink:"/ai-agents-lab/docs/agent-tools/create-agent-tools",draft:!1,unlisted:!1,editUrl:"https://github.com/mongodb-developer/ai-agents-lab/blob/main/docs/50-agent-tools/4-create-agent-tools.mdx",tags:[],version:"current",sidebarPosition:4,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"\ud83d\udc50 Instantiate chat completion LLM",permalink:"/ai-agents-lab/docs/agent-tools/chat-completion-llm"},next:{title:"\ud83d\udc50 Create the agent's knowledge base",permalink:"/ai-agents-lab/docs/agent-tools/knowledge-base"}},c={},l=[];function d(e){const n={admonition:"admonition",code:"code",h1:"h1",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components},{Details:t}=n;return t||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"-create-agent-tools",children:"\ud83d\udc50 Create agent tools"}),"\n",(0,s.jsxs)(n.p,{children:["The easiest way to define custom tools for agents in LangChain is using the ",(0,s.jsx)(n.code,{children:"@tool"})," decorator. The decorator makes tools out of functions by using the function name as the tool name by default, and the function's docstring as the tool's description."]}),"\n",(0,s.jsx)(n.p,{children:"We want the AI research agent to have access to the following tools:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"get_paper_metadata_arxiv"}),": Fetches a list of research papers from Arxiv, given a topic"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"get_paper_summary_from_arxiv"}),": Fetches the summary for a single research paper, given a paper ID"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"answer_questions_about_topics"}),": Answer questions about a given topic based on information in the agent's knowledge base"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Fill in any ",(0,s.jsx)(n.code,{children:"<CODE_BLOCK>"}),"s and run the cells under the ",(0,s.jsx)(n.strong,{children:"Step 6: Create agent tools"})," section in the notebook to create tools for the agent to use."]}),"\n",(0,s.jsxs)(n.admonition,{type:"tip",children:[(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"get_paper_metadata_arxiv"})," tool has been defined for you. Use this as inspiration to create the other two tools. The tool names and docstrings have been written out for you. All you have to do is code up the tool logic."]}),(0,s.jsxs)(n.p,{children:["Similarly, use the sample test for the ",(0,s.jsx)(n.code,{children:"get_paper_metadata_arxiv"})," tool to test out the other tools."]})]}),"\n",(0,s.jsx)(n.p,{children:"The answers for code blocks in this section are as follows:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"CODE_BLOCK_8"})}),"\n",(0,s.jsxs)(t,{children:[(0,s.jsx)("summary",{children:"Answer"}),(0,s.jsx)("div",{children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'doc = ArxivLoader(query=id, load_max_docs=1).get_summaries_as_docs()\nif len(doc) == 0:\n    return "No summary found for this paper."\nreturn doc[0].page_content\n'})})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"CODE_BLOCK_9"})}),"\n",(0,s.jsxs)(t,{children:[(0,s.jsx)("summary",{children:"Answer"}),(0,s.jsx)("div",{children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'MongoDBAtlasVectorSearch.from_connection_string(\n    connection_string=MONGODB_URI,\n    namespace=DB_NAME + "." + COLLECTION_NAME,\n    embedding=embedding_model,\n    index_name=ATLAS_VECTOR_SEARCH_INDEX_NAME,\n    text_key="abstract",\n)\n'})})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"CODE_BLOCK_10"})}),"\n",(0,s.jsxs)(t,{children:[(0,s.jsx)("summary",{children:"Answer"}),(0,s.jsx)("div",{children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'vector_store.as_retriever(search_type="similarity", search_kwargs={"k": 5})\n'})})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"CODE_BLOCK_11"})}),"\n",(0,s.jsxs)(t,{children:[(0,s.jsx)("summary",{children:"Answer"}),(0,s.jsx)("div",{children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'retrieve = {\n    "context": retriever\n    | (lambda docs: "\\n\\n".join([d.page_content for d in docs])),\n    "question": RunnablePassthrough(),\n}\n# Defining the chat prompt\ntemplate = """Answer the question based only on the following context. If no context is provided, say I do not know: \\\n{context}\n\nQuestion: {question}\n"""\nprompt = ChatPromptTemplate.from_template(template)\n# Parse output as a string\nparse_output = StrOutputParser()\n# Retrieval chain\nretrieval_chain = retrieve | prompt | llm | parse_output\n\nanswer = retrieval_chain.invoke(query)\n\nreturn answer\n'})})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"CODE_BLOCK_12"})}),"\n",(0,s.jsxs)(t,{children:[(0,s.jsx)("summary",{children:"Answer"}),(0,s.jsx)("div",{children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'get_paper_summary_from_arxiv.invoke("1808.09236")\n'})})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"CODE_BLOCK_13"})}),"\n",(0,s.jsxs)(t,{children:[(0,s.jsx)("summary",{children:"Answer"}),(0,s.jsx)("div",{children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'get_paper_summary_from_arxiv.invoke("808.09236")\n'})})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"CODE_BLOCK_14"})}),"\n",(0,s.jsxs)(t,{children:[(0,s.jsx)("summary",{children:"Answer"}),(0,s.jsx)("div",{children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'answer_questions_about_topics.invoke("What are partial cubes?")\n'})})})]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},1179:(e,n,t)=>{t.d(n,{A:()=>a});t(6540);var s=t(4848);function o(e){const n=e.url||"http://localhost:3000";return(0,s.jsxs)("div",{className:"browser container",children:[(0,s.jsxs)("div",{className:"row",children:[(0,s.jsxs)("div",{className:"column left",children:[(0,s.jsx)("span",{className:"dot",style:{background:"#ED594A"}}),(0,s.jsx)("span",{className:"dot",style:{background:"#FDD800"}}),(0,s.jsx)("span",{className:"dot",style:{background:"#5AC05A"}})]}),(0,s.jsx)("div",{className:"column middle",children:(0,s.jsx)("input",{type:"text",value:n})}),(0,s.jsx)("div",{className:"column right",children:(0,s.jsxs)("div",{style:{float:"right"},children:[(0,s.jsx)("span",{className:"bar"}),(0,s.jsx)("span",{className:"bar"}),(0,s.jsx)("span",{className:"bar"})]})})]}),(0,s.jsx)("div",{className:"content",children:e.children})]})}var r=t(8180);function a(e){return(0,s.jsx)(o,{...e,children:(0,s.jsx)("img",{src:(0,r.A)(e.src),alt:e.alt})})}},8453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>i});var s=t(6540);const o={},r=s.createContext(o);function a(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);